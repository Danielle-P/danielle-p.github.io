html[data-theme="dark"]
  color-scheme: dark

html[data-theme="light"]
  color-scheme: light
  
body
  font-family: $body-font
  font-size: 16px
  font-kerning: normal
  background-attachment: fixed
  +light-dark-color(color, $text-primary-light, $text-secondary-light)
  +background-gradient


body
  color: var(--text-color)
  +light-dark-color(color, $text-primary-light, $text-secondary-light)
  +background-gradient
  background-attachment: fixed
  
  
body
  font-family: $body-font
  font-size: 16px
  font-kerning: normal

  main
    min-height: calc(100vh - 112px)
    padding: 8em 0 0
    margin: 0 auto
    overflow-x: hidden

    ::selection,
      +light-dark-color(background, $accent-dark, $accent-light)
      +light-dark-color(color, $text-primary-light, $text-secondary-light)

    ::-moz-selection
      +light-dark-color(background, $accent-dark, $accent-light)

.page-content
  +page-content-width

h1
  +header-font-style

h2
  +subheader-font-style($margin: 0.5em 0 1.1em)

h3
  +subheader-font-style($font-size: 1em, $margin: 0 0 0.5em)
  font-weight: 500

p
  +body-font-style

  a
    text-transform: none
    border-bottom: 1px dotted 
    +light-dark-color(border-color, $accent-light, $accent-dark)
    +light-dark-color(color, $accent-light, $accent-dark)

a
  text-decoration: none
  +light-dark-color(color, $accent-light, $accent-dark)

  &:focus, &:focus-visible
    outline: none

  &:hover, &:active
    +light-dark-color(color, $accent-light, $accent-dark)
    opacity: 0.8 
    +transition-ease

blockquote
  +light-dark-color(border-color, $border-light, $border-dark)
  quotes: "\201C""\201D""\2018""\2019"

  &::before
    display: block
    color: rgba(116, 135, 158, 0.3)
    content: open-quote
    font-size: 3em

  a
    text-transform: none
    border-bottom: 1px dotted
    +light-dark-color(border-color, $border-light, $border-dark)

  p, a, li
    font-size: 0.95em

ul
  +body-font-style($padding: 0)
  margin: 0 0 0.8em
  padding-left: 1.6em

main ul li::before
  position: absolute
  margin-left: -1.5em
  content: '\2022'
  +light-dark-color(color, $accent-light, $accent-dark)
  font-size: 0.9em
  line-height: 1.4

.hidden-mobile-label
  display: none
  padding-left: 0.1em

.js-loading-image *, .js-loading-image *:before, .js-loading-image *:after
  animation-play-state: paused !important

/**Button Styles
  */
button
  &:focus, &:focus-visible
    outline: none

.btn-animate
  width: 3em
  height: 3em
  display: flex
  flex-direction: column
  justify-content: center
  align-items: center
  position: relative
  border-radius: 50%
  border: none
  cursor: pointer
  font-size: 1em
  +light-dark-color(background, $accent-light, $accent-dark)
  color: $white


  .label, .hide
    display: none
    position: absolute
    bottom: 1.1em
    font-family: $header-font
    font-size: 0.6em
    font-weight: 500

    &.visible
      display: block

  &::after
    width: 100%
    height: 100%
    display: block
    position: absolute
    top: 0
    left: 0
    content: ""
    border-radius: 50%
    background: $white
    opacity: 0
    transform: scale(0)
    +transition-ease(0.1s)
    +light-dark-color(background, $surface-opaque-light, $surface-accent-dark)

  &:hover
    &:after
      opacity: 0.4
      transform: scale(1)

.btn-menu
  display: none
  width: 2.6em
  height: 2.6em
  position: fixed
  right: 0
  margin: 0.7em 1em 1em 0
  z-index: 5
  +light-dark-color(background-color, $accent-light, $accent-dark)

  .icon-container
    transform: translateY(-1px)
    width: 20px
    height: 13px
    position: relative
    +transition-ease(.25s)

    span
      width: 100%
      height: 2px
      position: absolute
      display: block
      top: 0
      left: 0
      border-radius: $border-radius
      +light-dark-color(background-color, $text-primary-dark, $text-primary-light)
      +transition-ease(.25s)
      transform-origin: center left

      &:nth-of-type(2)
        transform: translateY(6px)

      &:nth-of-type(3)
        transform: translateY(12px)
        transform-origin: center right

    &.open
      transform: translateY(-3px)

      span
        &:first-of-type
          transform: translate(15px, 1px) rotate(40deg) scaleX(0.55)

        &:nth-of-type(2)
          transform: translate(15px, 0px) rotate(90deg) scaleX(0.88)

        &:nth-of-type(3)
          transform: translate(-5px, 1px) rotate(-40deg) scaleX(0.55)

.btn-ghost
  text-align: center
  padding: 0.6em 1em 0.5em
  border: 1px solid
  border-radius: $border-radius-small
  +light-dark-color(border-color, $accent-light, $accent-dark)
  +light-dark-color(color, $accent-light, $accent-dark)
  +transition-ease(.3s)

  &:hover
    +light-dark-color(color, $accent-light, $accent-dark)
    +light-dark-color(border-color, $accent-light, $accent-dark)

/**Navigation
  */
.nav-panel
  width: 100%
  height: 4em
  display: flex
  position: absolute
  top: 0
  align-items: center
  padding: 1em 2.2em 0.5em 
  +transition-ease(.3s)
  +image-box-shadow
  z-index: 4


.nav-links, .tab
    display: flex
    flex-grow: 1
    -webkit-flex-grow: 1
    flex-direction: row
    justify-content: flex-end
    margin: 0
    +nav-font-style
    opacity: 1

    a
      display: flex
      align-items: center
      text-align: center
      margin: 0 1.6em
      +light-dark-color(color, $text-primary-light, $text-primary-dark)
      border-bottom: 1px dotted transparent

      &:hover, &:active, &.selected
        +text-gradient
        border-bottom: 1px dotted
        +light-dark-color(border-color, $accent-light, $accent-dark)

      &.home
        width: 24px
        height: 24px
        background: url('/../images/profile-photo-updated.jpg') no-repeat
        background-size: contain
        border-radius: 50%
        border-bottom: none
        margin-right: 0.5em

        &:hover
          +light-dark-color(color, none, none)
          opacity: 0.8
    
    &.selected a
      +text-gradient
      border-bottom: 1px dotted
      +light-dark-color(border-color, $accent-light, $accent-dark)

.project-back-link
  position: absolute
  margin: 2em
  z-index: 4

.next-previous-projects
  bottom: 0
  display: flex
  justify-content: space-between
  width: 100%
  padding: 1em 2em 1.5em
  +transition-ease(.3s)

  &:hover a
    opacity: 0.7

  .next, .previous
    display: flex

    a
      display: flex
      flex-direction: column
      font-size: 1em

      div
        display: flex
        flex-direction: row

      span
        font-size: 0.8em
        padding-top: 0.5em
        letter-spacing: 0
        opacity: 0.8


/**Footer
  */
footer
  height: 80px
  display: flex
  flex-direction: row
  align-items: center
  margin-top: 2em
  padding: 0 2em 0 2em

  .theme-copyright
    display: flex
    flex-direction: row
    flex: auto
    justify-content: space-between

  .footer-info
    display: flex
    flex-direction: row
    align-items: center
    padding-left: 1em

    p, a
      padding: 0 0.8em
      font-size: 0.9em
      text-transform: none

    a
      border-left: 2px solid
      border-color: +light-dark-color(border-color, $border-light, $border-dark)

  .footer-links
    display: flex
    justify-content: space-between
    align-items: center

    a
      padding: 0 0.8em
      font-size: 0.8em

      &:hover
        opacity: 0.8

/**Toggle
.toggle-switch
  width: 48px
  height: 24px
  position: relative
  display: inline-block

input
  width: 0
  height: 0
  opacity: 0

.slider
  position: absolute
  top: 0
  left: 0
  right: 0
  bottom: 0
  cursor: pointer
  border-radius: 34px
  font-family: IcoFont
  border: 1px solid
  +light-dark-color(border-color, $border-light, $border-dark)
  +transition-ease

  &::before
    width: 22px
    height: 22px
    position: absolute
    left: 0px
    bottom: 0px
    padding: 4px
    border-radius: 50%
    font-size: 14px
    content: '\ee81' // sun icon
    background: $white
    color: $accent-light  
    +transition-ease

input:checked + .slider
    background-color: $accent-dark
    border: 1px solid
    +light-dark-color(border-color, $accent-light, $accent-dark)

    &::before
      content: '\ef9e' // moon icon
      padding-left: 4px
      transform: translateX(24px)
      background: $white

/**Back to Top
  */
#scroll-top-link
  position: fixed
  bottom: 2.3em
  right: 2.2em
  line-height: 0.4
  opacity: 0
  pointer-events: none
  transform: translateY(2em)
  +transition-ease
  z-index: 1

  &:hover
    a, span
      +light-dark-color(color, $accent-light, $accent-dark)

  a
    display: flex
    flex-direction: column
    align-items: center
    font-family: $header-font

  i
    font-size: 2em

  span
    font-size: 0.85em
    user-select: none
    +light-dark-color(color, $accent-light, $accent-dark)

  &.visible
    opacity: 1
    pointer-events: initial
    transform: translateY(0)

/**Modal
  */
#image-expand-modal
  width: 100%
  height: 100%
  position: fixed
  top: 50%
  left: 50%
  transform: translate(-50%, -50%)
  background-color: rgba(1, 9, 13, 0.9)
  visibility: hidden
  opacity: 0
  pointer-events: none
  overflow-x: auto
  transition: opacity 0.2s ease-in

  img
    width: auto
    height: 0vh
    position: absolute
    top: 50%
    left: 50%
    transform: translate(-50%, -50%)
    opacity: 0
    border-radius: $border-radius
    transition: height 0.4s

  &.open
    visibility: visible
    opacity: 1
    pointer-events: auto
    z-index: 10

    img
      height: 85vh
      margin-top: 4vh
      background: $white
      opacity: 1

.modal-close
  width: 2em
  height: 2em
  position: absolute
  top: 5vh
  right: 2.5em
  display: flex
  justify-content: center
  align-items: center
  border-radius: 50%
  cursor: pointer

  &.btn-animate
    +light-dark-color(background, $surface-opaque-light, $surface-opaque-dark)
    +light-dark-color(color, $text-primary-light, $text-primary-dark)

  i
    font-size: 1.5em

/**Grids
  */
.card-grid, .user-stories, .user-task-map, .testimonials-grid
  display: grid
  margin: 2em 0 2.5em

  h5
    margin-top: 0.8em
    font-weight: 600

  p
    margin: 0.8em 0
    padding: 0 0 0 0.4em
    line-height: 1.3
    border-left: 3px solid
    +light-dark-color(border-color, $surface-accent-light, $surface-accent-dark)

  .user-group, .item
    padding: 1em
    border-radius: $border-radius
    +light-dark-color(background, $surface-opaque-light, $surface-opaque-dark)

.full-width-panel-highlight .panel .user-stories .user-group
  +light-dark-color(background-color, $surface-accent-light, $surface-accent-dark)

.card-grid
  +standard-content-grid()
  grid-gap: 2.5em

  .item
    padding: 1em 1.5em 1.5em
    +light-dark-color(background, $surface-opaque-light, $surface-opaque-dark)

    h3
      margin-bottom: 0.4em
      text-align: left

    p
      align-self: center
      margin: 0.4em 0
      padding: 0.15em 0 0 0.8em
      border-left: none
      
      &:before
        position: absolute
        margin-left: -0.5em
        content: "â€¢"
        font-size: 1.8em
        line-height: 0.7
        +light-dark-color(color, $accent-light, $accent-dark)

.user-stories
  +standard-content-grid()

  .user-group
    display: grid

  &.pain-points
    margin: 0

.user-task-map
  grid-template-columns: auto 1fr 1fr 1fr
  grid-gap: 1.6em

  .headings-col, .user-story-col
    display: grid
    grid-template-rows: 25% 75%

    .user-story .item
      +light-dark-color(background-color, $surface-opaque-light, $surface-opaque-dark)
      border: 1px solid
      +light-dark-color(border-color, $accent-light, $accent-dark)

    .item
      margin-bottom: 0.5em
      padding: 0.8em
      line-height: 1.3
      font-size: 0.9em
      +light-dark-color(background-color, $surface-accent-light, $surface-accent-dark)

      h5
        margin-top: 0

  .headings-col .heading
    margin-top: 1.8em
    +subheader-font-style(0.9em)
    font-weight: bold

    &:first-of-type
      +light-dark-color(color, $accent-light, $accent-dark)

.testimonials-grid
  +standard-content-grid()
  grid-gap: 1.8em
  margin-top: 1em

  .item
    min-height: 5em
    display: flex
    justify-content: center
    align-items: center
    +light-dark-color(background, $surface-opaque-light, $surface-opaque-dark)

    p
      border-left: none
      text-align: center

    &:first-of-type
      grid-column: 1 / 3

/**Page Elements
  */
.team-members
  display: flex
  flex-direction: row
  flex-wrap: wrap
  text-align: center
  row-gap: 0.4em

.caption-container
  display: flex
  justify-content: center
  margin: 0 0 1.25em
  flex-wrap: wrap
  row-gap: 0.4em

.tag-label
  margin: 0 0.5em 0 0
  padding: 0.4em 0.7em
  border-radius: $border-radius-small
  line-height: 1.3
  font-size: 0.8em
  font-weight: 500
  text-transform: none
  +light-dark-color(background, $surface-accent-light, $surface-accent-dark)
  +light-dark-color(color, $text-primary-light, $text-primary-dark)

/** Panels
 */
.image-intersect img.lazy
  animation-play-state: paused !important

.full-width-panel-highlight:first-of-type .image-section .project-image img
  max-height: 380px

.panel
  display: grid
  width: 75%
  margin: 0 auto 2.5em

  &.two-column
    grid-template-columns: repeat(2, 1fr)
    grid-column-gap: 3em

    &.two-row
      grid-template-rows: repeat(2, 1fr)
      grid-gap: 3em

  .info-section
    align-self: center

  .image-section
    justify-self: center
    flex: 1
    justify-items: center
    align-items: center
    display: grid

    .project-image img
      max-width: 100%
      opacity: 0
      cursor: pointer
      border-radius: $border-radius

    @for $n from 1 through 8
      .project-image:nth-of-type(#{$n}) img
        +image-slide-in-left(#{$n * 0.1}s)

    @for $n from 1 through 8
      .project-image:nth-of-type(#{$n}) img
        +image-slide-in-right(#{$n * 0.1}s)

    &.image-grid
      align-items: flex-start

      &.two-col
        +default-image-grid ($columns: 2, $rows: 1)

      &.three-col
        +default-image-grid ($columns: 3, $rows: 1)
        align-items: center

      &.four-col
        +default-image-grid ($columns: 4, $rows: 1)

      &.five-col
        +default-image-grid ($columns: 5, $rows: 1)

      &.wireframes img
        border-radius: 0

      &.mobile
        grid-gap: 2em

        img
          max-height: 26em

    &.default-image-layout
      +default-image-grid

      // .project-image img
      //   border-radius: $border-radius

      &.one-img img
        max-height: 22em

      &.two-img
        +default-image-grid ($columns: 5, $rows: 3)
        .project-image
          grid-column: 1 / span 3
          grid-row: 1 / span 2

          &:nth-child(2)
            grid-column: 3 / span 3
            grid-row: 2 / span 2

      &.three-img
        +default-image-grid ($columns: 4, $gap: 0.6em)
        .project-image
          grid-column: 1 / span 2
          grid-row: 1 / span 2

          &:nth-child(1)
            grid-column: 1 / span 2

          &:nth-child(2)
            grid-column: 3 / span 2

          &:nth-child(3)
            grid-column: 2 / span 2
            grid-row: 2 / span 2

      &.four-img
        +default-image-grid ($columns: 2, $rows: 3, $gap: 0.6em)

        @for $n from 1 through 5
          .project-image:nth-child(#{$n})
            grid-column: $n / span 1
            grid-row: 1 / span 2

        .project-image
          &:nth-child(2),  &:nth-child(4)
            grid-row: 2 / span 2

      &.five-img
        +default-image-grid ($columns: 4, $gap: 0.6em)
        .project-image
          grid-column: 1 / span 2
          grid-row: 1 / span 2
          align-self: center

          &:nth-child(2)
            grid-column: 3 / span 1
            grid-row: 1 / span 1

          &:nth-child(3)
            grid-column: 4 / span 1
            grid-row: 1 / span 1

          &:nth-child(4)
            grid-column: 3 / span 1
            grid-row: 2 / span 1

          &:nth-child(5)
            grid-column: 4 / span 1
            grid-row: 2 / span 1

    &.overlap
      &.perspective
        perspective: 2200px

        .project-image
          transform: rotateY(32deg)

      @for $n from 1 through 4
        .project-image:nth-child(#{$n})
          grid-column: $n / span 2
          grid-row: 1


        img
          //border-radius: $border-radius
          overflow: hidden
          +image-box-shadow

      &.two-img
        grid-template-columns: repeat(3, 1fr)

      &.three-img
        grid-template-columns: repeat(4, 1fr)

      &.four-img
        grid-template-columns: repeat(5, 1fr)

  .intro-text-callout
    height: 100%
    display: flex
    flex-direction: column
    align-self: center
    justify-content: center
    padding: 1.3em 1.5em 1em
    border-radius: $border-radius

  &.info-section p
    padding: 0 0 0.8em 0

.case-study-tiles
  h2
    padding-top: 2em

  .feature-case-study
    min-height: 200px
    display: grid
    grid-column-gap: 1em
    grid-template-columns: 2fr 3fr
    position: relative
    border-radius: $border-radius
    +light-dark-color(background, $surface-opaque-light, $surface-opaque-dark)
    +animated-gradient-border()

    &.disabled
      opacity: 0.5
      cursor: not-allowed

    .feature-image
      height: 100%
      border-radius: $border-radius $border-radius 0 0

      &.knack
        background: url('/images/knack/page-editor.jpg') no-repeat
        background-size: cover
        background-position-y: top
        background-position-x: left

      &.vaayu
        background: url('/images/vaayu/vaayu-home.jpg') no-repeat
        background-size: cover
        background-position-y: top
        background-position-x: center

      &.adventure
        background: url('/images/adventure-gen/adventure-gen-composite.jpg') no-repeat
        background-size: cover
        background-position-y: top
        background-position-x: left

      &.gat-design
        background: url('/images/GAT-results.jpg') no-repeat
        background-size: cover
        background-position-y: top
        background-position-x: left

      &.ux-course
        background: url('/images/ux-course-journey-map.jpg') no-repeat center
        background-size: cover
        background-position-y: top

      &.mealsup
        background: url('/images/mealsup/mealsup-mockup-compilation-small.png') no-repeat center
        background-size: cover

      &.dashboard
        background: url('/images/dashboard-design/airline-dashboard/scores-page.jpg') no-repeat
        background-size: cover
        background-position-y: top

      &.dashboard-case-study
        background: url('/images/dashboard-study/wireframe-stage3.jpg') no-repeat center
        background-size: cover
        background-position-y: -28px

      &.wedding
        background: url('/images/wedding/design-process-4.jpg') no-repeat center
        background-size: cover
        background-position-y: top

.full-width-panel-highlight
  +light-dark-color(background, $surface-opaque-light, $surface-opaque-dark)
  padding: 3em 0 0.5em 0
  margin-bottom: 2.5em

  &:first-of-type
    margin-top: 4em

  ul
    margin-top: 0

  .intro-text-callout
    margin: 0 auto 2em
    background: rgba(255, 255, 255, 0.05)
    border-left: none

/*Tabs
  **/
.tab-section-heading
  display: flex
  flex-direction: column
  text-align: center
  margin-bottom: 1.7em
  color: red

  h2
    +header-font-style
    margin-bottom: 0
    font-size: 1.3em
  i
    font-size: 2.2em

.full-width-panel-highlight.tabs-container
  display: flex
  flex-direction: row
  justify-content: space-around
  text-align: center
  padding-bottom: 2.5em

  .tab
    font-size: 1em
    justify-content: center
    cursor: pointer

.tab-section
  .tab-heading
    margin: .7em 0 1.2em
  
  .tab-content
    display: none
    
    &.show
      display: block

/** Journey
  */
.journey
  display: flex

  .marker
    display: flex
    position: relative
    flex: 1
    flex-direction: column
    align-items: center
    opacity: 0

    .btn-animate
      +light-dark-color(background, $surface-opaque-light, $surface-opaque-dark)
      border: 1px solid
      +light-dark-color(border-color, $accent-light, $accent-dark)
      +light-dark-color(color, $accent-light, $accent-dark)

      &::after
        +light-dark-color(background, $accent-light, $accent-dark)
        opacity: 0.2

    &::after
      width: 0
      height: 1px
      position: absolute
      top: 4em
      left: calc(50% + 1.3em)
      opacity: 0.5
      content: ''
      +light-dark-color(background, $accent-light, $accent-dark)

    @for $n from 1 through 8
      &.visible:nth-of-type(#{$n})
        +journey-line-animation-desktop(#{($n - 1) * 0.6}s)

        &:last-of-type::after
          display: none

    .marker-label
      margin: 0.28em
      +light-dark-color(color, $text-secondary-light, $text-secondary-dark)
      cursor: pointer

      &:first-of-type h4
        display: none
        +light-dark-color(color, $accent-light, $accent-dark)

      h2
        font-size: 0.8em
        margin-bottom: 0.4em

      h4
        +light-dark-color(color, $text-primary-light, $text-primary-dark)
        margin: 0.2em auto 0.6em
        line-height: 2.2
        padding: 0
        text-align: center
        letter-spacing: 0
        text-transform: none

        .tag-label
          margin: 0
          padding: 0.2em 0.4em
          opacity: 0.9

    &.active
      .btn-timeline
        +light-dark-color(background, $accent-light, $accent-dark)
        border: 1px solid
        +light-dark-color(border-color, $accent-light, $accent-dark)
        color: $white

      .marker-label h4
        opacity: 1

  .btn-timeline
    z-index: 2

    i
      font-size: 1.5em

.journey-with-stages
  .journey-stage-titles
    display: flex
    padding: 2em 0 1em

    .stage-name
      +light-dark-color(color, $text-primary-light, $text-primary-dark)
      font-size: 0.8em
      text-align: center

      &:nth-of-type(even)
        +light-dark-color(color, $accent-light, $accent-dark)

  .journey
    .marker
      &::after
        top: 1.78em
        height: 1px
        +light-dark-color(color, $accent-light, $accent-dark)

    .stage-container
      z-index: 1

      .journey-stage
        width: 3.6em
        height: 3.6em
        display: flex
        align-items: center
        justify-content: center
        border-radius: 50%
        +light-dark-color(background, $surface-opaque-light, $surface-opaque-dark)
        border: 1px dotted
        +light-dark-color(border-color, $accent-light, $accent-dark)
        +light-dark-color(color, $accent-light, $accent-dark)

        i
          font-size: 1.5em

    .marker-label
      font-size: 0.9em

      h4
        line-height: 1.2em

.slide-down-panel
  display: none
  max-width: 800px
  padding: 1.3em 3em 2.8em
  margin: 0 auto

  .full-width-panel-highlight
    margin-bottom: 2.2em
    padding: 3em 0

.slide-down-panel
  .panel-heading
    h3
      font-size: 0.8em
      text-align: center
      opacity: 0

    h2
      margin: 0
      text-align: center
      opacity: 0
      +light-dark-color(color, $text-primary-light, $text-primary-dark)

    figcaption
      display: flex
      justify-content: center
      margin: 1em auto 1.2em
      opacity: 0

  .slide-in
    opacity: 0

  &.show
    display: block

    .panel-heading
      h2
        +slide-down($delay: .2s)

      h3
        +slide-down

      figcaption
        +slide-down($delay: .4s)

    &:not(.initial) .slide-in
      opacity: 0

      @for $n from 1 through 10
        &.slide-in:nth-child(#{$n})
          +slide-down(#{($n * 0.2) + 0.2}s)

    &.initial
      display: block

      .panel-heading
        h2
          +slide-down(2.4s)

        h3
          +slide-down(2.6s)

        figcaption
          +slide-down(2.8s)

      .slide-in
        +slide-down(3s)
